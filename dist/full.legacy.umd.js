!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("exifr",["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).exifr={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1});var n=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(t).forEach((function(r){-1===n.indexOf(r)&&e[r]!==t[r]&&(e[r]=t[r])})),t&&s(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return f=u()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i},f.apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)},c(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t=u();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,n)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(this,arguments)}function p(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var g="undefined"!=typeof self?self:global,v=Object.values||function(e){var t=[];for(var n in e)t.push(e[n]);return t},y=Object.entries||function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t},m=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)e[n]=t[n]})),e},k=Object.fromEntries||function(e){var t={};return S(e).forEach((function(e){var n=e[0],r=e[1];t[n]=r})),t},S=Array.from||function(e){if(e instanceof I){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t}return Array.prototype.slice.call(e)};function C(e){return-1!==this.indexOf(e)}Array.prototype.includes||(Array.prototype.includes=C),String.prototype.includes||(String.prototype.includes=C),String.prototype.startsWith||(String.prototype.startsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.substring(t,t+e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this.substring(t-e.length,t)===e});var b,P=function(e){var t=[];if(Object.defineProperties(t,{size:{get:function(){return this.length}},has:{value:function(e){return-1!==this.indexOf(e)}},add:{value:function(e){this.has(e)||this.push(e)}},delete:{value:function(e){if(this.has(e)){var t=this.indexOf(e);this.splice(t,1)}}}}),Array.isArray(e))for(var n=0;n<e.length;n++)t.add(e[n]);return t},A=function(e){return new I(e)},I=void 0!==g.Map&&void 0!==g.Map.prototype.keys?g.Map:function(){function e(n){if(t(this,e),this.clear(),n)for(var r=0;r<n.length;r++)this.set(n[r][0],n[r][1])}return r(e,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"size",get:function(){return this._keys.length}},{key:"get",value:function(e){return this._map["map_"+e]}},{key:"set",value:function(e,t){return this._map["map_"+e]=t,this._keys.indexOf(e)<0&&this._keys.push(e),this}},{key:"has",value:function(e){return this._keys.indexOf(e)>=0}},{key:"delete",value:function(e){var t=this._keys.indexOf(e);return!(t<0)&&(delete this._map["map_"+e],this._keys.splice(t,1),!0)}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var e=this;return this._keys.map((function(t){return e.get(t)}))}},{key:"entries",value:function(){var e=this;return this._keys.map((function(t){return[t,e.get(t)]}))}},{key:"forEach",value:function(e,t){for(var n=0;n<this._keys.length;n++)e.call(t,this._map["map_"+this._keys[n]],this._keys[n],this)}}]),e}(),T=g.fetch;g.fetch||(b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var i=new XMLHttpRequest;if(i.open("get",e,!0),i.responseType="arraybuffer",i.onerror=r,t.headers)for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);i.onload=function(){n({status:i.status,arrayBuffer:function(){return Promise.resolve(i.response)}})},i.send(null)}))},T=b);var O="undefined"!=typeof navigator,D=O&&"undefined"==typeof HTMLImageElement,w=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),x=g.Buffer,R=g.BigInt,M=!!x,L=function(e){return F(e)?void 0:e},U=function(e){return void 0!==e};function F(e){return void 0===e||(e instanceof I?0===e.size:0===v(e).filter(U).length)}function E(e){var t=new Error(e);throw delete t.stack,t}function B(e){return""===(e=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(e).trim())?void 0:e}function N(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var G=function(e){return String.fromCharCode.apply(null,e)},j="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function V(e){return j?j.decode(e):M?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(G(e)))}var H=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(t(this,e),"boolean"==typeof a&&(this.le=a),Array.isArray(n)&&(n=new Uint8Array(n)),0===n)this.byteOffset=0,this.byteLength=0;else if(n instanceof ArrayBuffer){void 0===i&&(i=n.byteLength-r);var o=new DataView(n,r,i);this._swapDataView(o)}else if(n instanceof Uint8Array||n instanceof DataView||n instanceof e){void 0===i&&(i=n.byteLength-r),(r+=n.byteOffset)+i>n.byteOffset+n.byteLength&&E("Creating view outside of available memory in ArrayBuffer");var s=new DataView(n.buffer,r,i);this._swapDataView(s)}else if("number"==typeof n){var u=new DataView(new ArrayBuffer(n));this._swapDataView(u)}else E("Invalid input argument for BufferView: "+n)}return r(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||E("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new r(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;return V(this.getUint8Array(e,t))}},{key:"getLatin1String",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return G(n)}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return G(n)}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}},{key:"getInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}},{key:"getUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}},{key:"getUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}},{key:"getFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getFloat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getDouble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}],[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),e}();function z(e,t){E("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var _=function(e){a(i,e);var n=h(i);function i(e){var r;return t(this,i),(r=n.call(this)).kind=e,r}return r(i,[{key:"get",value:function(e,t){return this.has(e)||z(this.kind,e),t&&(e in t||function(e,t){E("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||z(this.kind,e)),d(o(i.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return S(this.keys())}}]),i}(c(I)),W=new _("file parser"),X=new _("segment parser"),K=new _("file reader");function Y(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var J=q((function(e,t){return Y(t(e),(function(e){return new H(e)}))}));function q(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var Q=q((function(e,t,n){var r=new(K.get(n))(e,t);return Y(r.read(),(function(){return r}))})),Z=q((function(e,t,n,r){return K.has(n)?Q(e,t,n):r?J(e,r):(E("Parser ".concat(n," is not loaded")),Y())})),$="Invalid input argument";function ee(e,t){return"string"==typeof e?te(e,t):O&&!D&&e instanceof HTMLImageElement?te(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new H(e):O&&e instanceof Blob?Z(e,t,"blob",re):void E($)}function te(e,t){return(n=e).startsWith("data:")||n.length>1e4?Q(e,t,"base64"):w&&e.includes("://")?Z(e,t,"url",ne):w?Q(e,t,"fs"):O?Z(e,t,"url",ne):void E($);var n}var ne=function(e){return T(e).then((function(e){return e.arrayBuffer()}))},re=function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result||new ArrayBuffer)},r.onerror=n,r.readAsArrayBuffer(e)}))};var ie=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=S(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=S(this.values())),this.allValues}}]),i}(c(I));function ae(e,t,n){var r=new ie,i=n;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=S(i));for(var a=0;a<i.length;a++){var o=i[a],s=o[0],u=o[1];r.set(s,u)}if(Array.isArray(t)){var f=t;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=S(f));for(var c=0;c<f.length;c++){var l=f[c];e.set(l,r)}}else e.set(t,r);return r}function oe(e,t,n){var r,i=e.get(t),a=n;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=S(a));for(var o=0;o<a.length;o++)r=a[o],i.set(r[0],r[1])}var se=A(),ue=A(),fe=A(),ce=37500,le=37510,he=700,de=33723,pe=34675,ge=34665,ve=34853,ye=40965,me=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ke=["jfif","xmp","icc","iptc","ihdr"],Se=["tiff"].concat(ke),Ce=["ifd0","ifd1","exif","gps","interop"],be=[].concat(Se,Ce),Pe=["makerNote","userComment"],Ae=["translateKeys","translateValues","reviveValues","multiSegment"],Ie=[].concat(Ae,["sanitize","mergeOutput","silentErrors"]),Te=function(){function e(){t(this,e)}return r(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),Oe=function(e){a(o,e);var n=h(o);function o(e,r,a,s){var u;if(t(this,o),i(l(u=n.call(this)),"enabled",!1),i(l(u),"skip",P()),i(l(u),"pick",P()),i(l(u),"deps",P()),i(l(u),"translateKeys",!1),i(l(u),"translateValues",!1),i(l(u),"reviveValues",!1),u.key=e,u.enabled=r,u.parse=u.enabled,u.applyInheritables(s),u.canBeFiltered=Ce.includes(e),u.canBeFiltered&&(u.dict=se.get(e)),void 0!==a)if(Array.isArray(a))u.parse=u.enabled=!0,u.canBeFiltered&&a.length>0&&u.translateTagSet(a,u.pick);else if("object"==typeof a){if(u.enabled=!0,u.parse=!1!==a.parse,u.canBeFiltered){var f=a.pick,c=a.skip;f&&f.length>0&&u.translateTagSet(f,u.pick),c&&c.length>0&&u.translateTagSet(c,u.skip)}u.applyInheritables(a)}else!0===a||!1===a?u.parse=u.enabled=a:E("Invalid options argument: ".concat(a));return u}return r(o,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}},{key:"applyInheritables",value:function(e){var t,n,r=Ae;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++)void 0!==(n=e[t=r[i]])&&(this[t]=n)}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,r,i=this.dict,a=i.tagKeys,o=i.tagValues,s=e;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=S(s));for(var u=0;u<s.length;u++)"string"==typeof(n=s[u])?(-1===(r=o.indexOf(n))&&(r=a.indexOf(Number(n))),-1!==r&&t.add(Number(a[r]))):t.add(n)}else{var f=e;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=S(f));for(var c=0;c<f.length;c++){var l=f[c];t.add(l)}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Le(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Le(this.pick,this.deps)}}]),o}(Te),De={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},we=A(),xe=function(e){a(i,e);var n=h(i);function i(e){var r;return t(this,i),r=n.call(this),!0===e?r.setupFromTrue():void 0===e?r.setupFromUndefined():Array.isArray(e)?r.setupFromArray(e):"object"==typeof e?r.setupFromObject(e):E("Invalid options argument ".concat(e)),void 0===r.firstChunkSize&&(r.firstChunkSize=O?r.firstChunkSizeBrowser:r.firstChunkSizeNode),r.mergeOutput&&(r.ifd1.enabled=!1),r.filterNestedSegmentTags(),r.traverseTiffDependencyTree(),r.checkLoadedPlugins(),r}return r(i,[{key:"setupFromUndefined",value:function(){var e,t=me;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=S(t));for(var n=0;n<t.length;n++)this[e=t[n]]=De[e];var r=Ie;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++)this[e=r[i]]=De[e];var a=Pe;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=S(a));for(var o=0;o<a.length;o++)this[e=a[o]]=De[e];var s=be;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=S(s));for(var u=0;u<s.length;u++)this[e=s[u]]=new Oe(e,De[e],void 0,this)}},{key:"setupFromTrue",value:function(){var e,t=me;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=S(t));for(var n=0;n<t.length;n++)this[e=t[n]]=De[e];var r=Ie;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++)this[e=r[i]]=De[e];var a=Pe;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=S(a));for(var o=0;o<a.length;o++)this[e=a[o]]=!0;var s=be;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=S(s));for(var u=0;u<s.length;u++)this[e=s[u]]=new Oe(e,!0,void 0,this)}},{key:"setupFromArray",value:function(e){var t,n=me;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++)this[t=n[r]]=De[t];var i=Ie;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=S(i));for(var a=0;a<i.length;a++)this[t=i[a]]=De[t];var o=Pe;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=S(o));for(var s=0;s<o.length;s++)this[t=o[s]]=De[t];var u=be;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=S(u));for(var f=0;f<u.length;f++)this[t=u[f]]=new Oe(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,Ce)}},{key:"setupFromObject",value:function(e){var t;Ce.ifd0=Ce.ifd0||Ce.image,Ce.ifd1=Ce.ifd1||Ce.thumbnail,m(this,e);var n=me;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++)this[t=n[r]]=Me(e[t],De[t]);var i=Ie;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=S(i));for(var a=0;a<i.length;a++)this[t=i[a]]=Me(e[t],De[t]);var o=Pe;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=S(o));for(var s=0;s<o.length;s++)this[t=o[s]]=Me(e[t],De[t]);var u=Se;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=S(u));for(var f=0;f<u.length;f++)this[t=u[f]]=new Oe(t,De[t],e[t],this);var c=Ce;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=S(c));for(var l=0;l<c.length;l++)this[t=c[l]]=new Oe(t,De[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Ce,be),!0===e.tiff?this.batchEnableWithBool(Ce,!0):!1===e.tiff?this.batchEnableWithUserValue(Ce,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Ce):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Ce)}},{key:"batchEnableWithBool",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++){this[n[r]].enabled=t}}},{key:"batchEnableWithUserValue",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++){var i=n[r],a=t[i];this[i].enabled=!1!==a&&void 0!==a}}},{key:"setupGlobalFilters",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){var i=r;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=S(i));for(var a=0;a<i.length;a++){this[i[a]].enabled=!1}var o=Re(e,n);Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=S(o));for(var s=0;s<o.length;s++){var u=o[s],f=u[0],c=u[1];Le(this[f].pick,c),this[f].enabled=!0}}else if(t&&t.length){var l=Re(t,n);Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=S(l));for(var h=0;h<l.length;h++){var d=l[h],p=d[0],g=d[1];Le(this[p].skip,g)}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,r=this.iptc,i=this.icc;this.makerNote?t.deps.add(ce):t.skip.add(ce),this.userComment?t.deps.add(le):t.skip.add(le),n.enabled||e.skip.add(he),r.enabled||e.skip.add(de),i.enabled||e.skip.add(pe)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,r=this.gps;this.interop.needed&&(n.deps.add(ye),t.deps.add(ye)),n.needed&&t.deps.add(ge),r.needed&&t.deps.add(ve),this.tiff.enabled=Ce.some((function(t){return!0===e[t].enabled}))||this.makerNote||this.userComment;var i=Ce;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=S(i));for(var a=0;a<i.length;a++){this[i[a]].finalizeFilters()}}},{key:"onlyTiff",get:function(){var e=this;return!ke.map((function(t){return e[t].enabled})).some((function(e){return!0===e}))&&this.tiff.enabled}},{key:"checkLoadedPlugins",value:function(){var e=Se;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=S(e));for(var t=0;t<e.length;t++){var n=e[t];this[n].enabled&&!X.has(n)&&z("segment parser",n)}}}],[{key:"useCached",value:function(e){var t=we.get(e);return void 0!==t||(t=new this(e),we.set(e,t)),t}}]),i}(Te);function Re(e,t){var n,r,i,a=[],o=t;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=S(o));for(var s=0;s<o.length;s++){r=o[s],n=[];var u=se.get(r);Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=S(u));for(var f=0;f<u.length;f++)i=u[f],(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&a.push([r,n])}return a}function Me(e,t){return void 0!==e?e:void 0!==t?t:void 0}function Le(e,t){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++){var i=n[r];e.add(i)}}function Ue(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Fe(){}function Ee(e,t){if(!t)return e&&e.then?e.then(Fe):Promise.resolve()}function Be(e,t){var n=e();return n&&n.then?n.then(t):t(n)}i(xe,"default",De);var Ne=function(){function e(n){var r=this;t(this,e),i(this,"parsers",{}),i(this,"output",{}),i(this,"errors",[]),i(this,"pushToErrors",(function(e){return r.errors.push(e)})),this.options=xe.useCached(n)}return r(e,[{key:"read",value:function(e){try{var t=this;return Ue(ee(e,t.options),(function(e){t.file=e}))}catch(e){return Promise.reject(e)}}},{key:"setup",value:function(){if(!this.fileParser){var e=this.file,t=e.getUint16(0),n=W;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++){var i=n[r],a=i[0],o=i[1];if(o.canHandle(e,t))return this.fileParser=new o(this.options,this.file,this.parsers),e[a]=!0}this.file.close&&this.file.close(),E("Unknown file format")}}},{key:"parse",value:function(){try{var e=this,t=e.output,n=e.errors;return e.setup(),Ue(Be((function(){return e.options.silentErrors?Ue(e.executeParsers().catch(e.pushToErrors),(function(){n.push.apply(n,e.fileParser.errors)})):Ee(e.executeParsers())}),(function(){return e.file.close&&e.file.close(),e.options.silentErrors&&n.length>0&&(t.errors=n),L(t)})))}catch(e){return Promise.reject(e)}}},{key:"executeParsers",value:function(){try{var e=this,t=e.output;return Ue(e.fileParser.parse(),(function(){var n=v(e.parsers).map(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){return Ue(e.parse(),(function(n){e.assignToOutput(t,n)}))})));return e.options.silentErrors&&(n=n.map((function(t){return t.catch(e.pushToErrors)}))),Ee(Promise.all(n))}))}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;e.setup();var t,n=e.options,r=e.file,i=X.get("tiff",n);return Ue(Be((function(){if(!r.tiff)return function(e){var t=e();if(t&&t.then)return t.then(Fe)}((function(){if(r.jpeg)return Ue(e.fileParser.getOrFindSegment("tiff"),(function(e){t=e}))}));t={start:0,type:"tiff"}}),(function(){if(void 0!==t)return Ue(e.fileParser.ensureSegmentChunk(t),(function(t){return Ue((e.parsers.tiff=new i(t,n,r)).extractThumbnail(),(function(e){return r.close&&r.close(),e}))}))})))}catch(e){return Promise.reject(e)}}}]),e}();var Ge=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e,t){var n,r,i,a=new Ne(t);return n=a.read(e),r=function(){return a.parse()},i?r?r(n):n:(n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n)})),je=Object.freeze({__proto__:null,Exifr:Ne,Options:xe,allFormatters:Ie,chunkedProps:me,createDictionary:ae,extendDictionary:oe,fetchUrlAsArrayBuffer:ne,fileParsers:W,fileReaders:K,inheritables:Ae,otherSegments:ke,parse:Ge,readBlobAsArrayBuffer:re,segmentParsers:X,segments:Se,segmentsAndBlocks:be,tagKeys:se,tagRevivers:fe,tagValues:ue,tiffBlocks:Ce,tiffExtractables:Pe});function Ve(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var He=65536;function ze(){}var _e=function(){function e(n,r,a){var o=this;t(this,e),i(this,"errors",[]),i(this,"ensureSegmentChunk",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t,n,r,i=e.start,a=e.size||He;return t=function(){if(o.file.chunked)return function(e){var t=e();if(t&&t.then)return t.then(ze)}((function(){if(!o.file.available(i,a))return function(e){if(e&&e.then)return e.then(ze)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Ve(o.file.readChunk(i,a),(function(t){e.chunk=t}))}),(function(t){E("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))})));e.chunk=o.file.subarray(i,a)}));o.file.byteLength>i+a?e.chunk=o.file.subarray(i,a):void 0===e.size?e.chunk=o.file.subarray(i):E("Segment unreachable: "+JSON.stringify(e))},n=function(){return e.chunk},(r=t())&&r.then?r.then(n):n(r)}))),this.extendOptions&&this.extendOptions(n),this.options=n,this.file=r,this.parsers=a}return r(e,[{key:"injectSegment",value:function(e,t){this.options[e].enabled&&this.createParser(e,t)}},{key:"createParser",value:function(e,t){var n=new(X.get(e))(t,this.options,this.file);return this.parsers[e]=n}},{key:"createParsers",value:function(e){var t=e;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=S(t));for(var n=0;n<t.length;n++){var r=t[n],i=r.type,a=r.chunk,o=this.options[i];if(o&&o.enabled){var s=this.parsers[i];s&&s.append||s||this.createParser(i,a)}}}},{key:"readSegments",value:function(e){try{var t=e.map(this.ensureSegmentChunk);return Ve(function(e,t){if(!t)return e&&e.then?e.then(ze):Promise.resolve()}(Promise.all(t)))}catch(e){return Promise.reject(e)}}}]),e}(),We=function(){function e(n){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;t(this,e),i(this,"errors",[]),i(this,"raw",A()),i(this,"handleError",(function(e){if(!r.options.silentErrors)throw e;r.errors.push(e.message)})),this.chunk=this.normalizeInput(n),this.file=o,this.type=this.constructor.type,this.globalOptions=this.options=a,this.localOptions=a[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return r(e,[{key:"normalizeInput",value:function(e){return e instanceof H?e:new H(e)}},{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"output",get:function(){return this.translated?this.translated:this.raw?k(this.raw):void 0}},{key:"translateBlock",value:function(e,t){var n=fe.get(t),r=ue.get(t),i=se.get(t),a=this.options[t],o=a.reviveValues&&!!n,s=a.translateValues&&!!r,u=a.translateKeys&&!!i,f={},c=e;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=S(c));for(var l=0;l<c.length;l++){var h=c[l],d=h[0],p=h[1];o&&n.has(d)?p=n.get(d)(p):s&&r.has(d)&&(p=this.translateValue(p,r.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=p}return f}},{key:"translateValue",value:function(e,t){return t[e]||t.DEFAULT||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return m(e,n);e[t]?m(e[t],n):e[t]=n}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,i=t+r,a=n-r;return{offset:t,length:n,headerLength:r,start:i,size:a,end:i+a}}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new xe(i({},this.type,t)),e).parse()}}]),e}();function Xe(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}i(We,"headerLength",4),i(We,"type",void 0),i(We,"multiSegment",!1),i(We,"canHandle",(function(){return!1}));function Ke(){}var Ye=224;var Je=239;function qe(e,t){var n=e();return n&&n.then?n.then(t):t(n)}var Qe=192;function Ze(e,t,n){if(!e.s){if(n instanceof et){if(!n.s)return void(n.o=Ze.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Ze.bind(null,e,t),Ze.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var $e=194,et=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{Ze(r,1,a(this.v))}catch(e){Ze(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?Ze(r,1,t?t(i):i):n?Ze(r,1,n(i)):Ze(r,2,i)}catch(e){Ze(r,2,e)}},r},e}();function tt(e){return e instanceof et&&1&e.s}var nt=196,rt=219,it=221,at=218,ot=254;function st(e){return e===Qe||e===$e||e===nt||e===rt||e===it||e===at||e===ot}function ut(e){return e>=Ye&&e<=Je}function ft(e,t,n){var r=X;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++){var a=r[i],o=a[0];if(a[1].canHandle(e,t,n))return o}}var ct=function(e){a(o,e);var n=h(o);function o(){var e;t(this,o);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return i(l(e=n.call.apply(n,[this].concat(a))),"appSegments",[]),i(l(e),"jpegSegments",[]),i(l(e),"unknownSegments",[]),e}return r(o,[{key:"parse",value:function(){try{var e=this;return Xe(e.findAppSegments(),(function(){return Xe(e.readSegments(e.appSegments),(function(){e.mergeMultiSegments(),e.createParsers(e.mergedAppSegments||e.appSegments)}))}))}catch(e){return Promise.reject(e)}}},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=P(X.keyList())):(e=void 0===e?X.keyList().filter((function(e){return t.options[e].enabled})):e.filter((function(e){return t.options[e].enabled&&X.has(e)})),this.findAll=!1,this.remaining=P(e),this.wanted=P(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;try{var n=this;n.setupSegmentFinderArgs(t);var r=n.file,i=n.findAll,a=n.wanted,o=n.remaining;return Xe(qe((function(){if(!i&&n.file.chunked)return i=S(a).some((function(e){var t=X.get(e),r=n.options[e];return t.multiSegment&&r.multiSegment})),function(e){var t=e();if(t&&t.then)return t.then(Ke)}((function(){if(i)return function(e,t){if(!t)return e&&e.then?e.then(Ke):Promise.resolve()}(n.file.readWhole())}))}),(function(){var t=!1;if(e=n.findAppSegmentsInRange(e,r.byteLength),!n.options.onlyTiff)return function(){if(r.chunked){var i=!1;return function(e,t,n){for(var r;;){var i=e();if(tt(i)&&(i=i.v),!i)return a;if(i.then){r=0;break}var a=n();if(a&&a.then){if(!tt(a)){r=1;break}a=a.s}if(t){var o=t();if(o&&o.then&&!tt(o)){r=2;break}}}var s=new et,u=Ze.bind(null,s,2);return(0===r?i.then(c):1===r?a.then(f):o.then(l)).then(void 0,u),s;function f(r){a=r;do{if(t&&(o=t())&&o.then&&!tt(o))return void o.then(l).then(void 0,u);if(!(i=e())||tt(i)&&!i.v)return void Ze(s,1,a);if(i.then)return void i.then(c).then(void 0,u);tt(a=n())&&(a=a.v)}while(!a||!a.then);a.then(f).then(void 0,u)}function c(e){e?(a=n())&&a.then?a.then(f).then(void 0,u):f(a):Ze(s,1,a)}function l(){(i=e())?i.then?i.then(c).then(void 0,u):c(i):Ze(s,1,a)}}((function(){return!t&&o.size>0&&!i&&(!!r.canReadNextChunk||!!n.unfinishedMultiSegment)}),void 0,(function(){var a=r.nextChunkOffset,o=n.appSegments.some((function(e){return!n.file.available(e.offset||e.start,e.length||e.size)}));return qe((function(){return e>a&&!o?Xe(r.readNextChunk(e),(function(e){i=!e})):Xe(r.readNextChunk(a),(function(e){i=!e}))}),(function(){void 0===(e=n.findAppSegmentsInRange(e,r.byteLength))&&(t=!0)}))}))}}()})))}catch(e){return Promise.reject(e)}}},{key:"findAppSegmentsInRange",value:function(e,t){t-=2;for(var n,r,i,a,o,s,u=this.file,f=this.findAll,c=this.wanted,l=this.remaining,h=this.options;e<t;e++)if(255===u.getUint8(e))if(ut(n=u.getUint8(e+1))){if(r=u.getUint16(e+2),(i=ft(u,e,r))&&c.has(i)&&(o=(a=X.get(i)).findPosition(u,e),s=h[i],o.type=i,this.appSegments.push(o),!f&&(a.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||l.delete(i)):l.delete(i),0===l.size)))break;h.recordUnknownSegments&&((o=We.findPosition(u,e)).marker=n,this.unknownSegments.push(o)),e+=r+1}else if(st(n)){if(r=u.getUint16(e+2),n===at&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some((function(e){return e.multiSegment}))){var t=function(e,t){for(var n,r,i,a=A(),o=0;o<e.length;o++)r=(n=e[o])[t],a.has(r)?i=a.get(r):a.set(r,i=[]),i.push(n);return S(a)}(this.appSegments,"type");this.mergedAppSegments=t.map((function(t){var n=t[0],r=t[1],i=X.get(n,e.options);return i.handleMultiSegments?{type:n,chunk:i.handleMultiSegments(r)}:r[0]}))}}},{key:"getSegment",value:function(e){return this.appSegments.find((function(t){return t.type===e}))}},{key:"getOrFindSegment",value:function(e){try{var t=this,n=t.getSegment(e);return Xe(qe((function(){if(void 0===n)return Xe(t.findAppSegments(0,[e]),(function(){n=t.getSegment(e)}))}),(function(){return n})))}catch(e){return Promise.reject(e)}}}],[{key:"canHandle",value:function(e,t){return 65496===t}}]),o}(_e);function lt(){}i(ct,"type","jpeg"),W.set("jpeg",ct);function ht(e,t){if(!t)return e&&e.then?e.then(lt):Promise.resolve()}function dt(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function pt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var gt=1,vt=3,yt=4,mt=5,kt=6,St=8,Ct=9,bt=10,Pt=11,At=12,It=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];var Tt=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A(),r=this.options[t],i=r.pick,a=r.skip,o=(i=P(i)).size>0,s=0===a.size,u=this.chunk.getUint16(e);e+=2;for(var f=0;f<u;f++){var c=this.chunk.getUint16(e);if(o){if(i.has(c)&&(n.set(c,this.parseTag(e,c,t)),i.delete(c),0===i.size))break}else!s&&a.has(c)||n.set(c,this.parseTag(e,c,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var r=this.chunk,i=r.getUint16(e+2),a=r.getUint32(e+4),o=It[i];if(o*a<=4?e+=8:e=r.getUint32(e+8),(i<gt||i>13)&&E("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(i,", offset ").concat(e)),e>r.byteLength&&E("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(i,", offset ").concat(e," is outside of chunk size ").concat(r.byteLength)),i===gt)return r.getUint8Array(e,a);if(2===i)return B(r.getString(e,a));if(7===i)return r.getUint8Array(e,a);if(1===a)return this.parseTagValue(i,e);for(var s=function(e){switch(e){case gt:return Uint8Array;case vt:return Uint16Array;case yt:return Uint32Array;case mt:return Array;case kt:return Int8Array;case St:return Int16Array;case Ct:return Int32Array;case bt:return Array;case Pt:return Float32Array;case At:return Float64Array;default:return Array}}(i),u=new s(a),f=o,c=0;c<a;c++)u[c]=this.parseTagValue(i,e),e+=f;return u}},{key:"parseTagValue",value:function(e,t){var n=this.chunk;switch(e){case gt:return n.getUint8(t);case vt:return n.getUint16(t);case yt:return n.getUint32(t);case mt:return n.getUint32(t)/n.getUint32(t+4);case kt:return n.getInt8(t);case St:return n.getInt16(t);case Ct:return n.getInt32(t);case bt:return n.getInt32(t)/n.getInt32(t+4);case Pt:return n.getFloat(t);case At:return n.getDouble(t);case 13:return n.getUint32(t);default:E("Invalid tiff type ".concat(e))}}}]),i}(We),Ot=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){try{var e=this;e.parseHeader();var t=e.options;return pt(dt((function(){if(t.ifd0.enabled)return ht(e.parseIfd0Block())}),(function(){return dt((function(){if(t.exif.enabled)return ht(e.safeParse("parseExifBlock"))}),(function(){return dt((function(){if(t.gps.enabled)return ht(e.safeParse("parseGpsBlock"))}),(function(){return dt((function(){if(t.interop.enabled)return ht(e.safeParse("parseInteropBlock"))}),(function(){return dt((function(){if(t.ifd1.enabled)return ht(e.safeParse("parseThumbnailBlock"))}),(function(){return e.createOutput()}))}))}))}))})))}catch(e){return Promise.reject(e)}}},{key:"safeParse",value:function(e){var t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}},{key:"parseBlock",value:function(e,t){var n=A();return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){try{var e=this;if(e.ifd0)return pt();var t=e.file;return e.findIfd0Offset(),e.ifd0Offset<8&&E("Malformed EXIF data"),!t.chunked&&e.ifd0Offset>t.byteLength&&E("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(e.ifd0Offset,", file.byteLength: ").concat(t.byteLength)),pt(dt((function(){if(t.tiff)return ht(t.ensureChunk(e.ifd0Offset,N(e.options)))}),(function(){var t=e.parseBlock(e.ifd0Offset,"ifd0");if(0!==t.size)return e.exifOffset=t.get(ge),e.interopOffset=t.get(ye),e.gpsOffset=t.get(ve),e.xmp=t.get(he),e.iptc=t.get(de),e.icc=t.get(pe),e.options.sanitize&&(t.delete(ge),t.delete(ye),t.delete(ve),t.delete(he),t.delete(de),t.delete(pe)),t})))}catch(e){return Promise.reject(e)}}},{key:"parseExifBlock",value:function(){try{var e=this;return e.exif?pt():pt(dt((function(){if(!e.ifd0)return ht(e.parseIfd0Block())}),(function(){if(void 0!==e.exifOffset)return dt((function(){if(e.file.tiff)return ht(e.file.ensureChunk(e.exifOffset,N(e.options)))}),(function(){var t=e.parseBlock(e.exifOffset,"exif");return e.interopOffset||(e.interopOffset=t.get(ye)),e.makerNote=t.get(ce),e.userComment=t.get(le),e.options.sanitize&&(t.delete(ye),t.delete(ce),t.delete(le)),e.unpack(t,41728),e.unpack(t,41729),t}))})))}catch(e){return Promise.reject(e)}}},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){try{var e=this;return e.gps?pt():pt(dt((function(){if(!e.ifd0)return ht(e.parseIfd0Block())}),(function(){if(void 0!==e.gpsOffset){var t=e.parseBlock(e.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Dt.apply(void 0,t.get(2).concat([t.get(1)]))),t.set("longitude",Dt.apply(void 0,t.get(4).concat([t.get(3)])))),t}})))}catch(e){return Promise.reject(e)}}},{key:"parseInteropBlock",value:function(){try{var e=this;return e.interop?pt():pt(dt((function(){if(!e.ifd0)return ht(e.parseIfd0Block())}),(function(){return dt((function(){if(void 0===e.interopOffset&&!e.exif)return ht(e.parseExifBlock())}),(function(){if(void 0!==e.interopOffset)return e.parseBlock(e.interopOffset,"interop")}))})))}catch(e){return Promise.reject(e)}}},{key:"parseThumbnailBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=this;return t.ifd1||t.ifd1Parsed||t.options.mergeOutput&&!e?pt():(t.findIfd1Offset(),t.ifd1Offset>0&&(t.parseBlock(t.ifd1Offset,"ifd1"),t.ifd1Parsed=!0),pt(t.ifd1))}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;return e.headerParsed||e.parseHeader(),pt(dt((function(){if(!e.ifd1Parsed)return ht(e.parseThumbnailBlock(!0))}),(function(){if(void 0!==e.ifd1){var t=e.ifd1.get(513),n=e.ifd1.get(514);return e.chunk.getUint8Array(t,n)}})))}catch(e){return Promise.reject(e)}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}},{key:"createOutput",value:function(){var e,t,n,r={},i=Ce;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=S(i));for(var a=0;a<i.length;a++)if(!F(e=this[t=i[a]]))if(n=this.canTranslate?this.translateBlock(e,t):k(e),this.options.mergeOutput){if("ifd1"===t)continue;m(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)m(e,t);else{var n=y(t);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++){var i=n[r],a=i[0],o=i[1];this.assignObjectToOutput(e,a,o)}}}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),i}(Tt);function Dt(e,t,n,r){var i=e+t/60+n/3600;return"S"!==r&&"W"!==r||(i*=-1),i}i(Ot,"type","tiff"),i(Ot,"headerLength",10),X.set("tiff",Ot);var wt=Object.freeze({__proto__:null,Exifr:Ne,Options:xe,allFormatters:Ie,chunkedProps:me,createDictionary:ae,default:je,extendDictionary:oe,fetchUrlAsArrayBuffer:ne,fileParsers:W,fileReaders:K,inheritables:Ae,otherSegments:ke,parse:Ge,readBlobAsArrayBuffer:re,segmentParsers:X,segments:Se,segmentsAndBlocks:be,tagKeys:se,tagRevivers:fe,tagValues:ue,tiffBlocks:Ce,tiffExtractables:Pe}),xt={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};function Rt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Mt=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t=new Ne(Lt);return Rt(t.read(e),(function(){return Rt(t.parse(),(function(e){if(e&&e.gps){var t=e.gps;return{latitude:t.latitude,longitude:t.longitude}}}))}))})),Lt=m({},xt,{firstChunkSize:4e4,gps:[1,2,3,4]});function Ut(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ft(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var Et=Ft((function(e){return Ut(this.thumbnail(e),(function(e){if(void 0!==e){var t=new Blob([e]);return URL.createObjectURL(t)}}))})),Bt=Ft((function(e){var t=new Ne(Nt);return Ut(t.read(e),(function(){return Ut(t.extractThumbnail(),(function(e){return e&&M?x.from(e):e}))}))})),Nt=m({},xt,{tiff:!1,ifd1:!0,mergeOutput:!1});function Gt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var jt=function(t){return Gt(Vt(t),(function(t){return m({canvas:e.rotateCanvas,css:e.rotateCss},zt[t])}))},Vt=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t=new Ne(Ht);return Gt(t.read(e),(function(){return Gt(t.parse(),(function(e){if(e&&e.ifd0)return e.ifd0[274]}))}))})),Ht=m({},xt,{firstChunkSize:4e4,ifd0:[274]}),zt=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(e.rotateCanvas=!0,e.rotateCss=!0,"object"==typeof navigator){var _t=navigator.userAgent;if(_t.includes("iPad")||_t.includes("iPhone")){var Wt=_t.match(/OS (\d+)_(\d+)/);if(Wt){var Xt=Wt[1],Kt=Wt[2],Yt=Number(Xt)+.1*Number(Kt);e.rotateCanvas=Yt<13.4,e.rotateCss=!1}}else if(_t.includes("OS X 10")){var Jt=_t.match(/OS X 10[_.](\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(Jt)<15}if(_t.includes("Chrome/")){var qt=_t.match(/Chrome\/(\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(qt)<81}else if(_t.includes("Firefox/")){var Qt=_t.match(/Firefox\/(\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(Qt)<77}}function Zt(){}function $t(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var en=function(e){a(s,e);var n=h(s);function s(){var e;t(this,s);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i(l(e=n.call.apply(n,[this].concat(a))),"ranges",new tn),0!==e.byteLength&&e.ranges.add(0,e.byteLength),e}return r(s,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var r=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(r)}else{var i=e+t;if(i>this.byteLength){var a=this._extend(i).dataView;this._swapDataView(a)}}}},{key:"_extend",value:function(e){var t;t=M?x.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),d(o(s.prototype),"subarray",this).call(this,e,t)}},{key:"set",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(t,e.byteLength,e);var n=d(o(s.prototype),"set",this).call(this,e,t);return this.ranges.add(t,n.byteLength),n}},{key:"ensureChunk",value:function(e,t){try{var n=this;return n.chunked?n.ranges.available(e,t)?$t():$t(function(e,t){if(!t)return e&&e.then?e.then(Zt):Promise.resolve()}(n.readChunk(e,t))):$t()}catch(e){return Promise.reject(e)}}},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),s}(H),tn=function(){function e(){t(this,e),i(this,"list",[])}return r(e,[{key:"length",get:function(){return this.list.length}},{key:"add",value:function(e,t){var n=e+t,r=this.list.filter((function(t){return nn(e,t.offset,n)||nn(e,t.end,n)}));if(r.length>0){e=Math.min.apply(Math,[e].concat(r.map((function(e){return e.offset})))),n=Math.max.apply(Math,[n].concat(r.map((function(e){return e.end})))),t=n-e;var i=r.shift();i.offset=e,i.length=t,i.end=n,this.list=this.list.filter((function(e){return!r.includes(e)}))}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some((function(t){return t.offset<=e&&n<=t.end}))}}]),e}();function nn(e,t,n){return e<=t&&t<=n}function rn(){}function an(e,t){if(!t)return e&&e.then?e.then(rn):Promise.resolve()}function on(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var sn=function(e){a(o,e);var n=h(o);function o(e,r){var a;return t(this,o),i(l(a=n.call(this,0)),"chunksRead",0),a.input=e,a.options=r,a}return r(o,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,on(an(e.readChunk(e.nextChunkOffset)))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){try{var e=this;return e.chunked=!0,on(an(e.readChunk(0,e.options.firstChunkSize)))}catch(e){return Promise.reject(e)}}},{key:"readNextChunk",value:function(e){try{var t=this;if(void 0===e&&(e=t.nextChunkOffset),t.fullyRead)return t.chunksRead++,on(!1);var n=t.options.chunkSize;return on(t.readChunk(e,n),(function(e){return!!e&&e.byteLength===n}))}catch(e){return Promise.reject(e)}}},{key:"readChunk",value:function(e,t){try{var n=this;return n.chunksRead++,on(0===(t=n.safeWrapAddress(e,t))?void 0:n._readChunk(e,t))}catch(e){return Promise.reject(e)}}},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}}]),o}(en);function un(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var fn=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,un(re(e.input),(function(t){e._swapArrayBuffer(t)}))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,d(o(i.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(e,t){try{var n=this,r=t?e+t:void 0,i=n.input.slice(e,r);return un(re(i),(function(t){return n.set(t,e,!0)}))}catch(e){return Promise.reject(e)}}}]),i}(sn);K.set("blob",fn);var cn=Object.freeze({__proto__:null,Exifr:Ne,Options:xe,allFormatters:Ie,chunkedProps:me,createDictionary:ae,default:wt,extendDictionary:oe,fetchUrlAsArrayBuffer:ne,fileParsers:W,fileReaders:K,gps:Mt,gpsOnlyOptions:Lt,inheritables:Ae,orientation:Vt,orientationOnlyOptions:Ht,otherSegments:ke,parse:Ge,readBlobAsArrayBuffer:re,get rotateCanvas(){return e.rotateCanvas},get rotateCss(){return e.rotateCss},rotation:jt,rotations:zt,segmentParsers:X,segments:Se,segmentsAndBlocks:be,tagKeys:se,tagRevivers:fe,tagValues:ue,thumbnail:Bt,thumbnailOnlyOptions:Nt,thumbnailUrl:Et,tiffBlocks:Ce,tiffExtractables:Pe});function ln(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var hn=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,ln(ne(e.input),(function(t){t instanceof ArrayBuffer?e._swapArrayBuffer(t):t instanceof Uint8Array&&e._swapBuffer(t)}))}catch(e){return Promise.reject(e)}}},{key:"_readChunk",value:function(e,t){try{var n=this,r=t?e+t-1:void 0,i=n.options.httpHeaders||{};return(e||r)&&(i.range="bytes=".concat([e,r].join("-"))),ln(T(n.input,{headers:i}),(function(r){return ln(r.arrayBuffer(),(function(i){var a=i.byteLength;if(416!==r.status)return a!==t&&(n.size=e+a),n.set(i,e,!0)}))}))}catch(e){return Promise.reject(e)}}}]),i}(sn);K.set("url",hn);function dn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}H.prototype.getUint64=function(e){var t=this.getUint32(e),n=this.getUint32(e+4);return t<1048575?t<<32|n:void 0!==typeof R?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),R(t)<<R(32)|R(n)):void E("Trying to read 64b value but JS can only handle 53b numbers.")};function pn(e,t,n){if(!e.s){if(n instanceof gn){if(!n.s)return void(n.o=pn.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(pn.bind(null,e,t),pn.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}var gn=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{pn(r,1,a(this.v))}catch(e){pn(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?pn(r,1,t?t(i):i):n?pn(r,1,n(i)):pn(r,2,i)}catch(e){pn(r,2,e)}},r},e}();function vn(e){return e instanceof gn&&1&e.s}function yn(){}function mn(e,t){if(!t)return e&&e.then?e.then(yn):Promise.resolve()}function kn(e,t){var n=e();return n&&n.then?n.then(t):t(n)}var Sn=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parseBoxes",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[];e<this.file.byteLength-4;){var n=this.parseBoxHead(e);if(t.push(n),0===n.length)break;e+=n.length}return t}},{key:"parseSubBoxes",value:function(e){e.boxes=this.parseBoxes(e.start)}},{key:"findBox",value:function(e,t){return void 0===e.boxes&&this.parseSubBoxes(e),e.boxes.find((function(e){return e.kind===t}))}},{key:"parseBoxHead",value:function(e){var t=this.file.getUint32(e),n=this.file.getString(e+4,4),r=e+8;return 1===t&&(t=this.file.getUint64(e+8),r+=8),{offset:e,length:t,kind:n,start:r}}},{key:"parseBoxFullHead",value:function(e){if(void 0===e.version){var t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}}]),i}(_e),Cn=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){try{var e=this,t=e.file.getUint32(0),n=e.parseBoxHead(t);return dn((r=function(e,t,n){for(var r;;){var i=e();if(vn(i)&&(i=i.v),!i)return a;if(i.then){r=0;break}var a=n();if(a&&a.then){if(!vn(a)){r=1;break}a=a.s}if(t){var o=t();if(o&&o.then&&!vn(o)){r=2;break}}}var s=new gn,u=pn.bind(null,s,2);return(0===r?i.then(c):1===r?a.then(f):o.then(l)).then(void 0,u),s;function f(r){a=r;do{if(t&&(o=t())&&o.then&&!vn(o))return void o.then(l).then(void 0,u);if(!(i=e())||vn(i)&&!i.v)return void pn(s,1,a);if(i.then)return void i.then(c).then(void 0,u);vn(a=n())&&(a=a.v)}while(!a||!a.then);a.then(f).then(void 0,u)}function c(e){e?(a=n())&&a.then?a.then(f).then(void 0,u):f(a):pn(s,1,a)}function l(){(i=e())?i.then?i.then(c).then(void 0,u):c(i):pn(s,1,a)}}((function(){return"meta"!==n.kind}),void 0,(function(){return t+=n.length,dn(e.file.ensureChunk(t,16),(function(){n=e.parseBoxHead(t)}))})),i=function(){return dn(e.file.ensureChunk(n.offset,n.length),(function(){return e.parseBoxFullHead(n),e.parseSubBoxes(n),kn((function(){if(e.options.icc.enabled)return mn(e.findIcc(n))}),(function(){return kn((function(){if(e.options.tiff.enabled)return mn(e.findExif(n))}),(function(){return function(e){var t=e();if(t&&t.then)return t.then(yn)}((function(){if(e.options.xmp.enabled)return mn(e.findXmp(n))}))}))}))}))},r&&r.then?r.then(i):i(r)))}catch(e){return Promise.reject(e)}var r,i}},{key:"registerSegment",value:function(e,t,n){try{var r=this;return dn(r.file.ensureChunk(t,n),(function(){var i=r.file.subarray(t,n);r.createParser(e,i)}))}catch(e){return Promise.reject(e)}}},{key:"findIcc",value:function(e){try{var t=this,n=t.findBox(e,"iprp");if(void 0===n)return dn();var r=t.findBox(n,"ipco");if(void 0===r)return dn();var i=t.findBox(r,"colr");return void 0===i?dn():dn(mn(t.registerSegment("icc",i.offset+12,i.length)))}catch(e){return Promise.reject(e)}}},{key:"findExif",value:function(e){try{var t=this,n=t.findBox(e,"iinf");if(void 0===n)return dn();var r=t.findBox(e,"iloc");if(void 0===r)return dn();var i=t.findExifLocIdInIinf(n),a=t.findExtentInIloc(r,i);if(void 0===a)return dn();var o=a[0],s=a[1];return dn(t.file.ensureChunk(o,s),(function(){var e=4+t.file.getUint32(o);return o+=e,s-=e,mn(t.registerSegment("tiff",o,s))}))}catch(e){return Promise.reject(e)}}},{key:"findXmp",value:function(e){try{var t=this,n=t.findBox(e,"iinf");if(void 0===n)return dn();var r=t.findBox(e,"iloc");if(void 0===r)return dn();var i=t.findXmpLocIdInIinf(n),a=t.findExtentInIloc(r,i);if(void 0===a)return dn();var o=a[0],s=a[1];return dn(t.file.ensureChunk(o,s),(function(){return o+=4,s-=4,mn(t.registerSegment("xmp",o,s))}))}catch(e){return Promise.reject(e)}}},{key:"findExifLocIdInIinf",value:function(e){this.parseBoxFullHead(e);var t,n,r,i=e.start,a=this.file.getUint16(i);for(i+=2;a--;){if(t=this.parseBoxHead(i),this.parseBoxFullHead(t),n=t.start,t.version>=2&&(r=3===t.version?4:2,"Exif"===this.file.getString(n+r+2,4)))return this.file.getUintBytes(n,r);i+=t.length}}},{key:"findXmpLocIdInIinf",value:function(e){this.parseBoxFullHead(e);var t,n,r,i=e.start,a=this.file.getUint16(i);for(i+=2;a--;){if(t=this.parseBoxHead(i),this.parseBoxFullHead(t),n=t.start,t.version>=2){r=3===t.version?4:2;var o=t.length-r-t.start+t.offset-2;if("mime\0application/rdf+xml"===this.file.getString(n+r+2,o-1))return this.file.getUintBytes(n,r)}i+=t.length}}},{key:"get8bits",value:function(e){var t=this.file.getUint8(e);return[t>>4,15&t]}},{key:"findExtentInIloc",value:function(e,t){this.parseBoxFullHead(e);var n=e.start,r=this.get8bits(n++),i=r[0],a=r[1],o=this.get8bits(n++),s=o[0],u=o[1],f=2===e.version?4:2,c=1===e.version||2===e.version?2:0,l=u+i+a,h=2===e.version?4:2,d=this.file.getUintBytes(n,h);for(n+=h;d--;){var p=this.file.getUintBytes(n,f);n+=f+c+2+s;var g=this.file.getUint16(n);if(n+=2,p===t)return g>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(n+u,i),this.file.getUintBytes(n+u+i,a)];n+=g*l}}}],[{key:"canHandle",value:function(e,t){if(0!==t)return!1;var n=e.getUint16(2);if(n>50)return!1;for(var r=16,i=[];r<n;)i.push(e.getString(r,4)),r+=4;return i.includes(this.type)}}]),i}(Sn),bn=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i)}(Cn);i(bn,"type","heic");var Pn=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i)}(Cn);i(Pn,"type","avif"),W.set("heic",bn),W.set("avif",Pn),ae(se,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ae(se,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ae(se,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ae(ue,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);var An=ae(ue,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),In={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};An.set(37392,In),An.set(41488,In);var Tn={0:"Normal",1:"Low",2:"High"};function On(e){return"object"==typeof e&&void 0!==e.length?e[0]:e}function Dn(e){var t=S(e).slice(1);return t[1]>15&&(t=t.map((function(e){return String.fromCharCode(e)}))),"0"!==t[2]&&0!==t[2]||t.pop(),t.join(".")}function wn(e){if("string"==typeof e){var t=e.trim().split(/[-: ]/g).map(Number),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=new Date(n,r-1,i);return isNaN(a)||isNaN(o)||isNaN(s)||(u.setHours(a),u.setMinutes(o),u.setSeconds(s)),isNaN(+u)?e:u}}function xn(e){if("string"==typeof e)return e;var t=[];if(0===e[1]&&0===e[e.length-1])for(var n=0;n<e.length;n+=2)t.push(Rn(e[n+1],e[n]));else for(var r=0;r<e.length;r+=2)t.push(Rn(e[r],e[r+1]));return B(String.fromCodePoint.apply(String,t))}function Rn(e,t){return e<<8|t}An.set(41992,Tn),An.set(41993,Tn),An.set(41994,Tn),ae(fe,["ifd0","ifd1"],[[50827,function(e){return"string"!=typeof e?V(e):e}],[306,wn],[40091,xn],[40092,xn],[40093,xn],[40094,xn],[40095,xn]]),ae(fe,"exif",[[40960,Dn],[36864,Dn],[36867,wn],[36868,wn],[40962,On],[40963,On]]),ae(fe,"gps",[[0,function(e){return S(e).join(".")}],[7,function(e){return S(e).join(":")}]]);var Mn="http://ns.adobe.com/",Ln="http://ns.adobe.com/xmp/extension/",Un=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"normalizeInput",value:function(e){return"string"==typeof e?e:H.from(e).getString()}},{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chunk;if(!this.localOptions.parse)return e;e=function(e){var t={},n={},r=_n;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++){var a=r[i];t[a]=[],n[a]=0}return e.replace(Wn,(function(e,r,i){if("<"===r){var a=++n[i];return t[i].push(a),"".concat(e,"#").concat(a)}var o=t[i].pop();return"".concat(e,"#").concat(o)}))}(e);var t=Bn.findAll(e,"rdf","Description");0===t.length&&t.push(new Bn("rdf","Description",void 0,e));var n={},r=t;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++){var a=r[i].properties;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=S(a));for(var o=0;o<a.length;o++){var s=a[o];Nn(s,Vn(s.ns,n))}}return function(e){for(var t in e)void 0===(e[t]=L(e[t]))&&delete e[t];return L(e)}(n)}},{key:"assignToOutput",value:function(e,t){if(this.localOptions.parse){var n=y(t);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=S(n));for(var r=0;r<n.length;r++){var i=n[r],a=i[0],o=i[1];switch(a){case"tiff":this.assignObjectToOutput(e,"ifd0",o);break;case"exif":this.assignObjectToOutput(e,"exif",o);break;case"xmlns":break;default:this.assignObjectToOutput(e,a,o)}}}else e.xmp=t}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1752462448===e.getUint32(t+4)&&e.getString(t+4,Mn.length)===Mn}},{key:"headerLength",value:function(e,t){return e.getString(t+4,Ln.length)===Ln?79:4+"http://ns.adobe.com/xap/1.0/".length+1}},{key:"findPosition",value:function(e,t){var n=d(o(i),"findPosition",this).call(this,e,t);return n.multiSegment=n.extended=79===n.headerLength,n.multiSegment?(n.chunkCount=e.getUint8(t+72),n.chunkNumber=e.getUint8(t+76),0!==e.getUint8(t+77)&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}},{key:"handleMultiSegments",value:function(e){return e.map((function(e){return e.chunk.getString()})).join("")}}]),i}(We);i(Un,"type","xmp"),i(Un,"multiSegment",!0),X.set("xmp",Un);var Fn=function(){function e(n,r,i){t(this,e),this.ns=n,this.name=r,this.value=i}return r(e,[{key:"serialize",value:function(){return this.value}}],[{key:"findAll",value:function(t){return Hn(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(e.unpackMatch)}},{key:"unpackMatch",value:function(t){var n=t[1],r=t[2],i=t[3].slice(1,-1);return new e(n,r,i=zn(i))}}]),e}(),En="[\\w\\d-]+",Bn=function(){function e(n,r,i,a){t(this,e),this.ns=n,this.name=r,this.attrString=i,this.innerXml=a,this.attrs=Fn.findAll(i),this.children=e.findAll(a),this.value=0===this.children.length?zn(a):void 0,this.properties=[].concat(this.attrs,this.children)}return r(e,[{key:"isPrimitive",get:function(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}},{key:"isListContainer",get:function(){return 1===this.children.length&&this.children[0].isList}},{key:"isList",get:function(){var e=this.ns,t=this.name;return"rdf"===e&&("Seq"===t||"Bag"===t||"Alt"===t)}},{key:"isListItem",get:function(){return"rdf"===this.ns&&"li"===this.name}},{key:"serialize",value:function(){if(0!==this.properties.length||void 0!==this.value){if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return jn(this.children.map(Gn));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();var e={},t=this.properties;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=S(t));for(var n=0;n<t.length;n++){Nn(t[n],e)}return void 0!==this.value&&(e.value=this.value),L(e)}}}],[{key:"findAll",value:function(t,n,r){if(void 0!==n||void 0!==r){n=n||En,r=r||En;var i=new RegExp("<(".concat(n,"):(").concat(r,")(#\\d+)?((\\s+?[\\w\\d-:]+=(\"[^\"]*\"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)"),"gm")}else i=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Hn(t,i).map(e.unpackMatch)}},{key:"unpackMatch",value:function(t){return new e(t[1],t[2],t[4],t[8])}}]),e}();function Nn(e,t){var n=e.serialize();void 0!==n&&(t[e.name]=n)}var Gn=function(e){return e.serialize()},jn=function(e){return 1===e.length?e[0]:e},Vn=function(e,t){return t[e]?t[e]:t[e]={}};function Hn(e,t){var n,r=[];if(!e)return r;for(;null!==(n=t.exec(e));)r.push(n);return r}function zn(e){if(!function(e){return null==e||"null"===e||"undefined"===e||""===e||""===e.trim()}(e)){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e.trim()}}var _n=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Wn=new RegExp("(<|\\/)(".concat(_n.join("|"),")"),"g");var Xn=Object.freeze({__proto__:null,Exifr:Ne,Options:xe,allFormatters:Ie,chunkedProps:me,createDictionary:ae,default:cn,extendDictionary:oe,fetchUrlAsArrayBuffer:ne,fileParsers:W,fileReaders:K,gps:Mt,gpsOnlyOptions:Lt,inheritables:Ae,orientation:Vt,orientationOnlyOptions:Ht,otherSegments:ke,parse:Ge,readBlobAsArrayBuffer:re,get rotateCanvas(){return e.rotateCanvas},get rotateCss(){return e.rotateCss},rotation:jt,rotations:zt,segmentParsers:X,segments:Se,segmentsAndBlocks:be,tagKeys:se,tagRevivers:fe,tagValues:ue,thumbnail:Bt,thumbnailOnlyOptions:Nt,thumbnailUrl:Et,tiffBlocks:Ce,tiffExtractables:Pe});function Kn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Yn=er((function(e,t,n){var r=n[e];return r.enabled=!0,r.parse=!0,X.get(e).parse(t,r)}));const Jn="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function qn(e,t,n){if(!e.s){if(n instanceof Qn){if(!n.s)return void(n.o=qn.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(qn.bind(null,e,t),qn.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var Qn=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{qn(r,1,a(this.v))}catch(e){qn(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?qn(r,1,t?t(i):i):n?qn(r,1,n(i)):qn(r,2,i)}catch(e){qn(r,2,e)}},r},e}();function Zn(e){return e instanceof Qn&&1&e.s}function $n(e,t,n){if("function"==typeof e[Jn]){var r,i,a,o=e[Jn]();function c(e){try{for(;!((r=o.next()).done||n&&n());)if((e=t(r.value))&&e.then){if(!Zn(e))return void e.then(c,a||(a=qn.bind(null,i=new Qn,2)));e=e.v}i?qn(i,1,e):i=e}catch(e){qn(i||(i=new Qn),2,e)}}if(c(),o.return){var s=function(e){try{r.done||o.return()}catch(e){}return e};if(i&&i.then)return i.then(s,(function(e){throw s(e)}));s()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var u=[],f=0;f<e.length;f++)u.push(e[f]);return function(e,t,n){var r,i,a=-1;return function o(s){try{for(;++a<e.length&&(!n||!n());)if((s=t(a))&&s.then){if(!Zn(s))return void s.then(o,i||(i=qn.bind(null,r=new Qn,2)));s=s.v}r?qn(r,1,s):r=s}catch(e){qn(r||(r=new Qn),2,e)}}(),r}(u,(function(e){return t(u[e])}),n)}function er(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var tr=er((function(e,t,n){var r=new xe(t);return r.chunked=!1,void 0===n&&"string"==typeof e&&(n=function(e){var t=e.toLowerCase().split(".").pop();if(function(e){return"exif"===e||"tiff"===e||"tif"===e}(t))return"tiff";if(nr.includes(t))return t}(e)),Kn(ee(e,r),(function(e){var t,i,a=!1;return n?nr.includes(n)?Yn(n,e,r):void E("Invalid segment type"):function(e){var t=e.getString(0,50).trim();return t.includes("<?xpacket")||t.includes("<x:")}(e)?Yn("xmp",e,r):(t=$n(X,(function(t){var n=t[0];if(nr.includes(n))return Kn(Yn(n,e,r).catch(rr),(function(e){if(e)return a=!0,e}))}),(function(){return a})),i=function(e){if(a)return e;E("Unknown file format")},t&&t.then?t.then(i):i(t))}))})),nr=["xmp","icc","iptc","tiff"],rr=function(){};function ir(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var ar=function(e){a(i,e);var n=h(i);function i(){var e;t(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).input=e.input.replace(/^data:([^;]+);base64,/gim,""),e.size=e.input.length/4*3,e.input.endsWith("==")?e.size-=2:e.input.endsWith("=")&&(e.size-=1),e}return r(i,[{key:"_readChunk",value:function(e,t){try{var n,r,i=this,a=i.input;void 0===e?(e=0,n=0,r=0):r=e-(n=4*Math.floor(e/3))/4*3,void 0===t&&(t=i.size);var o=e+t,s=n+4*Math.ceil(o/3);a=a.slice(n,s);var u=Math.min(t,i.size-e);if(M){var f=x.from(a,"base64").slice(r,r+u);return ir(i.set(f,e,!0))}for(var c=i.subarray(e,u,!0),l=atob(a),h=c.toUint8(),d=0;d<u;d++)h[d]=l.charCodeAt(r+d);return ir(c)}catch(e){return Promise.reject(e)}}}]),i}(sn);function or(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function sr(){}K.set("base64",ar);var ur=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"extendOptions",value:function(e){var t=e.ifd0,n=e.xmp,r=e.iptc,i=e.icc;n.enabled&&t.deps.add(he),r.enabled&&t.deps.add(de),i.enabled&&t.deps.add(pe),t.finalizeFilters()}},{key:"parse",value:function(){try{var e=this,t=e.options,n=t.tiff,r=t.xmp,i=t.iptc,a=t.icc;return or(function(e){var t=e();if(t&&t.then)return t.then(sr)}((function(){if(n.enabled||r.enabled||i.enabled||a.enabled){var t=Math.max(N(e.options),e.options.chunkSize);return or(e.file.ensureChunk(0,t),(function(){return e.createParser("tiff",e.file),e.parsers.tiff.parseHeader(),or(e.parsers.tiff.parseIfd0Block(),(function(){e.adaptTiffPropAsSegment("xmp"),e.adaptTiffPropAsSegment("iptc"),e.adaptTiffPropAsSegment("icc")}))}))}})))}catch(e){return Promise.reject(e)}}},{key:"adaptTiffPropAsSegment",value:function(e){if(this.parsers.tiff[e]){var t=this.parsers.tiff[e];this.injectSegment(e,t)}}}],[{key:"canHandle",value:function(e,t){return 18761===t||19789===t}}]),i}(_e);function fr(){}i(ur,"type","tiff"),W.set("tiff",ur);function cr(e,t){if(!t)return e&&e.then?e.then(fr):Promise.resolve()}function lr(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var hr="XML:com.adobe.xmp";function dr(e,t,n){if(!e.s){if(n instanceof pr){if(!n.s)return void(n.o=dr.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(dr.bind(null,e,t),dr.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var pr=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{dr(r,1,a(this.v))}catch(e){dr(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?dr(r,1,t?t(i):i):n?dr(r,1,n(i)):dr(r,2,i)}catch(e){dr(r,2,e)}},r},e}();function gr(e){return e instanceof pr&&1&e.s}var vr="ihdr",yr="iccp",mr="text",kr="itxt",Sr=[vr,yr,mr,kr,"exif"],Cr=function(e){a(o,e);var n=h(o);function o(){var e;t(this,o);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return i(l(e=n.call.apply(n,[this].concat(a))),"catchError",(function(t){return e.errors.push(t)})),i(l(e),"metaChunks",[]),i(l(e),"unknownChunks",[]),e}return r(o,[{key:"parse",value:function(){try{var e=this,t=e.file;return lr(e.findPngChunksInRange("PNG\r\n\n".length,t.byteLength),(function(){return lr(e.readSegments(e.metaChunks),(function(){return e.findIhdr(),e.parseTextChunks(),lr(e.findExif().catch(e.catchError),(function(){return lr(e.findXmp().catch(e.catchError),(function(){return cr(e.findIcc().catch(e.catchError))}))}))}))}))}catch(e){return Promise.reject(e)}}},{key:"findPngChunksInRange",value:function(e,t){try{var n=this,r=n.file;return lr(n.file.ensureChunk(e,12),(function(){return function(e){if(e&&e.then)return e.then(fr)}(function(e,t,n){for(var r;;){var i=e();if(gr(i)&&(i=i.v),!i)return a;if(i.then){r=0;break}var a=n();if(a&&a.then){if(!gr(a)){r=1;break}a=a.s}if(t){var o=t();if(o&&o.then&&!gr(o)){r=2;break}}}var s=new pr,u=dr.bind(null,s,2);return(0===r?i.then(c):1===r?a.then(f):o.then(l)).then(void 0,u),s;function f(r){a=r;do{if(t&&(o=t())&&o.then&&!gr(o))return void o.then(l).then(void 0,u);if(!(i=e())||gr(i)&&!i.v)return void dr(s,1,a);if(i.then)return void i.then(c).then(void 0,u);gr(a=n())&&(a=a.v)}while(!a||!a.then);a.then(f).then(void 0,u)}function c(e){e?(a=n())&&a.then?a.then(f).then(void 0,u):f(a):dr(s,1,a)}function l(){(i=e())?i.then?i.then(c).then(void 0,u):c(i):dr(s,1,a)}}((function(){return!!r.chunked&&!!n.file.available(e,12)||e<t}),void 0,(function(){var t=r.getUint32(e),i=r.getUint32(e+4),a=r.getString(e+4,4).toLowerCase(),o=t+4+4+4,s={type:a,offset:e,length:o,start:e+4+4,size:t,marker:i};return Sr.includes(a)?n.metaChunks.push(s):n.unknownChunks.push(s),e+=o,cr(n.file.ensureChunk(e,12))})))}))}catch(e){return Promise.reject(e)}}},{key:"parseTextChunks",value:function(){var e=this.metaChunks.filter((function(e){return e.type===mr}));Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=S(e));for(var t=0;t<e.length;t++){var n=e[t],r=this.file.getString(n.start,n.size).split("\0"),i=r[0],a=r[1];this.injectKeyValToIhdr(i,a)}}},{key:"injectKeyValToIhdr",value:function(e,t){var n=this.parsers.ihdr;n&&n.raw.set(e,t)}},{key:"findIhdr",value:function(){var e=this.metaChunks.find((function(e){return e.type===vr}));e&&!1!==this.options[vr].enabled&&this.createParser(vr,e.chunk)}},{key:"findExif",value:function(){try{var e=this.metaChunks.find((function(e){return"exif"===e.type}));return e?(this.injectSegment("tiff",e.chunk),lr()):lr()}catch(e){return Promise.reject(e)}}},{key:"findXmp",value:function(){try{var e=this.metaChunks.filter((function(e){return e.type===kr}));Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=S(e));for(var t=0;t<e.length;t++){var n=e[t];n.chunk.getString(0,hr.length)===hr&&this.injectSegment("xmp",n.chunk)}return lr()}catch(e){return Promise.reject(e)}}},{key:"findIcc",value:function(){try{var e=this,t=e.metaChunks.find((function(e){return e.type===yr}));if(!t)return lr();for(var n=t.chunk,r=n.getUint8Array(0,81),i=0;i<80&&0!==r[i];)i++;var a=i+2,o=n.getString(0,i);return e.injectKeyValToIhdr("ProfileName",o),lr(function(e){var t=e();if(t&&t.then)return t.then(fr)}((function(){if(w)return lr(undefined,(function(t){var r=n.getUint8Array(a);r=t.inflateSync(r),e.injectSegment("icc",r)}))})))}catch(e){return Promise.reject(e)}}}],[{key:"canHandle",value:function(e,t){return 35152===t&&2303741511===e.getUint32(0)&&218765834===e.getUint32(4)}}]),o}(_e);function br(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Pr(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function Ar(e,t,n){if(!e.s){if(n instanceof Ir){if(!n.s)return void(n.o=Ar.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Ar.bind(null,e,t),Ar.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}i(Cr,"type","png"),W.set("png",Cr);var Ir=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{Ar(r,1,a(this.v))}catch(e){Ar(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?Ar(r,1,t?t(i):i):n?Ar(r,1,n(i)):Ar(r,2,i)}catch(e){Ar(r,2,e)}},r},e}();function Tr(e){return e instanceof Ir&&1&e.s}function Or(){}var Dr=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){try{var e=!1,t=this,n=t.options,r=n.tiff,i=n.xmp,a=n.icc,o={},s={XMP:!1,EXIF:!1,ICC:!1},u=12;return br((f=function(e,t,n){for(var r;;){var i=e();if(Tr(i)&&(i=i.v),!i)return a;if(i.then){r=0;break}var a=n();if(a&&a.then){if(!Tr(a)){r=1;break}a=a.s}if(t){var o=t();if(o&&o.then&&!Tr(o)){r=2;break}}}var s=new Ir,u=Ar.bind(null,s,2);return(0===r?i.then(c):1===r?a.then(f):o.then(l)).then(void 0,u),s;function f(r){a=r;do{if(t&&(o=t())&&o.then&&!Tr(o))return void o.then(l).then(void 0,u);if(!(i=e())||Tr(i)&&!i.v)return void Ar(s,1,a);if(i.then)return void i.then(c).then(void 0,u);Tr(a=n())&&(a=a.v)}while(!a||!a.then);a.then(f).then(void 0,u)}function c(e){e?(a=n())&&a.then?a.then(f).then(void 0,u):f(a):Ar(s,1,a)}function l(){(i=e())?i.then?i.then(c).then(void 0,u):c(i):Ar(s,1,a)}}((function(){return!e&&1}),void 0,(function(){return br(t.file.ensureChunk(u,8),(function(){if(!(t.file.chunked&&!t.file.available(u,8)||u+8>t.file.byteLength)){var n=t.file.getString(u,4),f=t.file.getUint32(u+4,!0);return Pr((function(){if("VP8X"===n)return br(t.file.ensureChunk(u+4+4,1),(function(){var e=t.file.getUint8(u+4+4,1);s.XMP=(4&e)>>2&&i.enabled,s.EXIF=(8&e)>>3&&r.enabled,s.ICC=(32&e)>>5&&a.enabled}))}),(function(){o[n.trim()]={head:u+8,len:f-8},u+=f+8,u+=u%2;var t=!0;for(var r in s)s[r]&&!o[r]&&(t=!1);t&&(e=!0)}))}e=!0}))})),c=function(){return Pr((function(){if(r.enabled&&null!=o.EXIF)return br(t.file.ensureChunk(o.EXIF.head,o.EXIF.len),(function(){t.createParser("tiff",t.file.subarray(o.EXIF.head,o.EXIF.len))}))}),(function(){return Pr((function(){if(i.enabled&&null!=o.XMP)return br(t.file.ensureChunk(o.XMP.head,o.XMP.len),(function(){t.createParser("xmp",t.file.subarray(o.XMP.head,o.XMP.len))}))}),(function(){return function(e){var t=e();if(t&&t.then)return t.then(Or)}((function(){if(a.enabled&&null!=o.ICCP)return br(t.file.ensureChunk(o.ICCP.head,o.ICCP.len),(function(){t.createParser("icc",t.file.subarray(o.ICCP.head,o.ICCP.len))}))}))}))}))},f&&f.then?f.then(c):c(f)))}catch(e){return Promise.reject(e)}var f,c}}],[{key:"canHandle",value:function(e,t){return 21065===t&&1380533830===e.getUint32(0)&&1464156752===e.getUint32(8)}}]),i}(_e);i(Dr,"type","webp"),W.set("webp",Dr),ae(se,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),oe(se,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);var wr=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];oe(se,"ifd0",wr),oe(se,"exif",wr),ae(ue,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);var xr=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){return this.parseTags(),this.translate(),this.output}},{key:"parseTags",value:function(){this.raw=A([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}],[{key:"canHandle",value:function(e,t){return 224===e.getUint8(t+1)&&1246120262===e.getUint32(t+4)&&0===e.getUint8(t+8)}}]),i}(We);i(xr,"type","jfif"),i(xr,"headerLength",9),X.set("jfif",xr),ae(se,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);var Rr=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){return this.parseTags(),this.translate(),this.output}},{key:"parseTags",value:function(){this.raw=A([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)]].concat(S(this.raw)))}}]),i}(We);i(Rr,"type","ihdr"),X.set("ihdr",Rr),ae(se,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ae(ue,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);var Mr="\0\0\0\0",Lr=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){return this.raw=A(),this.parseHeader(),this.parseTags(),this.translate(),this.output}},{key:"parseHeader",value:function(){var e=this.raw;this.chunk.byteLength<84&&E("ICC header is too short");var t=y(Ur);Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=S(t));for(var n=0;n<t.length;n++){var r=t[n],i=r[0],a=r[1];i=parseInt(i,10);var o=a(this.chunk,i);o!==Mr&&e.set(i,o)}}},{key:"parseTags",value:function(){for(var e,t,n,r,i,a=this.raw,o=this.chunk.getUint32(128),s=132,u=this.chunk.byteLength;o--;){if(e=this.chunk.getString(s,4),t=this.chunk.getUint32(s+4),n=this.chunk.getUint32(s+8),r=this.chunk.getString(t,4),t+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");void 0!==(i=this.parseTag(r,t,n))&&i!==Mr&&a.set(e,i),s+=12}}},{key:"parseTag",value:function(e,t,n){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,n);case"sig ":return this.parseSig(t)}if(!(t+n>this.chunk.byteLength))return this.chunk.getUint8Array(t,n)}},{key:"parseDesc",value:function(e){var t=this.chunk.getUint32(e+8)-1;return B(this.chunk.getString(e+12,t))}},{key:"parseText",value:function(e,t){return B(this.chunk.getString(e+8,t-8))}},{key:"parseSig",value:function(e){return B(this.chunk.getString(e+8,4))}},{key:"parseMluc",value:function(e){for(var t=this.chunk,n=t.getUint32(e+8),r=t.getUint32(e+12),i=e+16,a=[],o=0;o<n;o++){var s=t.getString(i+0,2),u=t.getString(i+2,2),f=t.getUint32(i+4),c=t.getUint32(i+8)+e,l=B(t.getUnicodeString(c,f));a.push({lang:s,country:u,text:l}),i+=r}return 1===n?a[0].text:a}},{key:"translateValue",value:function(e,t){return"string"==typeof e?t[e]||t[e.toLowerCase()]||e:t[e]||e}}],[{key:"canHandle",value:function(e,t){return 226===e.getUint8(t+1)&&1229144927===e.getUint32(t+4)}},{key:"findPosition",value:function(e,t){var n=d(o(i),"findPosition",this).call(this,e,t);return n.chunkNumber=e.getUint8(t+16),n.chunkCount=e.getUint8(t+17),n.multiSegment=n.chunkCount>1,n}},{key:"handleMultiSegments",value:function(e){return t=function(e){var t=e[0].constructor,n=0,r=e;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=S(r));for(var i=0;i<r.length;i++)n+=r[i].length;var a=new t(n),o=0,s=e;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=S(s));for(var u=0;u<s.length;u++){var f=s[u];a.set(f,o),o+=f.length}return a}(e.map((function(e){return e.chunk.toUint8()}))),new H(t);var t}}]),i}(We);i(Lr,"type","icc"),i(Lr,"multiSegment",!0),i(Lr,"headerLength",18);var Ur={4:Fr,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map((function(e){return e.toString(10)})).join(".")},12:Fr,16:Fr,20:Fr,24:function(e,t){var n=e.getUint16(t),r=e.getUint16(t+2)-1,i=e.getUint16(t+4),a=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(n,r,i,a,o,s))},36:Fr,40:Fr,48:Fr,52:Fr,64:function(e,t){return e.getUint32(t)},80:Fr};function Fr(e,t){return B(e.getString(t,4))}X.set("icc",Lr),ae(se,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);var Er={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Br={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ae(ue,"icc",[[4,Er],[12,Br],[40,m({},Er,Br)],[48,Er],[80,Er],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);var Nr=function(e){a(i,e);var n=h(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"parse",value:function(){for(var e=this.raw,t=this.chunk.byteLength-1,n=!1,r=0;r<t;r++)if(28===this.chunk.getUint8(r)&&2===this.chunk.getUint8(r+1)){n=!0;var i=this.chunk.getUint16(r+3),a=this.chunk.getUint8(r+2),o=this.chunk.getLatin1String(r+5,i);e.set(a,this.pluralizeValue(e.get(a),o)),r+=4+i}else if(n)break;return this.translate(),this.output}},{key:"pluralizeValue",value:function(e,t){return void 0!==e?e instanceof Array?(e.push(t),e):[e,t]:t}}],[{key:"canHandle",value:function(e,t,n){return 237===e.getUint8(t+1)&&"Photoshop"===e.getString(t+4,9)&&void 0!==this.containsIptc8bim(e,t,n)}},{key:"headerLength",value:function(e,t,n){var r,i=this.containsIptc8bim(e,t,n);if(void 0!==i)return(r=e.getUint8(t+i+7))%2!=0&&(r+=1),0===r&&(r=4),i+8+r}},{key:"containsIptc8bim",value:function(e,t,n){for(var r=0;r<n;r++)if(this.isIptcSegmentHead(e,t+r))return r}},{key:"isIptcSegmentHead",value:function(e,t){return 56===e.getUint8(t)&&943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}}]),i}(We);i(Nr,"type","iptc"),i(Nr,"translateValues",!1),i(Nr,"reviveValues",!1),X.set("iptc",Nr),ae(se,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ae(ue,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]),e.Exifr=Ne,e.Options=xe,e.allFormatters=Ie,e.chunkedProps=me,e.createDictionary=ae,e.default=Xn,e.extendDictionary=oe,e.fetchUrlAsArrayBuffer=ne,e.fileParsers=W,e.fileReaders=K,e.gps=Mt,e.gpsOnlyOptions=Lt,e.inheritables=Ae,e.orientation=Vt,e.orientationOnlyOptions=Ht,e.otherSegments=ke,e.parse=Ge,e.readBlobAsArrayBuffer=re,e.rotation=jt,e.rotations=zt,e.segmentParsers=X,e.segments=Se,e.segmentsAndBlocks=be,e.sidecar=tr,e.tagKeys=se,e.tagRevivers=fe,e.tagValues=ue,e.thumbnail=Bt,e.thumbnailOnlyOptions=Nt,e.thumbnailUrl=Et,e.tiffBlocks=Ce,e.tiffExtractables=Pe,Object.defineProperty(e,"__esModule",{value:!0})}));
